<form *ngIf="DLTCardFormGroup" [formGroup]="DLTCardFormGroup">
    <!-- 5. DLT section -->
    <div>
        <div>
            <!-- allocate dlt template group section -->
            <div class="text-lg font-semibold text-gray-700 mt-4">DLT Template Groups<span class="text-red-500">*</span>
            </div>

            <div class="mt-2 md:flex w-full items-center justify-between md:space-x-8 mb-10">
                <div class="flex flex-col md:ml-0 md:mt-0 mt-8 md:w-full">
                    <div class="rounded-md bg-light-blue-50 p-4 mt-4 border border-blue-400 border-dashed">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <svg class="h-7 w-7 text-blue-500" viewBox="0 0 24 24" version="1.1">
                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <polygon points="0 0 24 0 24 24 0 24" />
                                        <path
                                            d="M22,15 L22,19 C22,20.1045695 21.1045695,21 20,21 L8,21 C5.790861,21 4,19.209139 4,17 C4,14.790861 5.790861,13 8,13 L20,13 C21.1045695,13 22,13.8954305 22,15 Z M7,19 C8.1045695,19 9,18.1045695 9,17 C9,15.8954305 8.1045695,15 7,15 C5.8954305,15 5,15.8954305 5,17 C5,18.1045695 5.8954305,19 7,19 Z"
                                            fill="currentColor" opacity="0.3" />
                                        <path
                                            d="M15.5421357,5.69999981 L18.3705628,8.52842693 C19.1516114,9.30947552 19.1516114,10.5758055 18.3705628,11.3568541 L9.88528147,19.8421354 C8.3231843,21.4042326 5.79052439,21.4042326 4.22842722,19.8421354 C2.66633005,18.2800383 2.66633005,15.7473784 4.22842722,14.1852812 L12.7137086,5.69999981 C13.4947572,4.91895123 14.7610871,4.91895123 15.5421357,5.69999981 Z M7,19 C8.1045695,19 9,18.1045695 9,17 C9,15.8954305 8.1045695,15 7,15 C5.8954305,15 5,15.8954305 5,17 C5,18.1045695 5.8954305,19 7,19 Z"
                                            fill="currentColor" opacity="0.3" />
                                        <path
                                            d="M5,3 L9,3 C10.1045695,3 11,3.8954305 11,5 L11,17 C11,19.209139 9.209139,21 7,21 C4.790861,21 3,19.209139 3,17 L3,5 C3,3.8954305 3.8954305,3 5,3 Z M7,19 C8.1045695,19 9,18.1045695 9,17 C9,15.8954305 8.1045695,15 7,15 C5.8954305,15 5,15.8954305 5,17 C5,18.1045695 5.8954305,19 7,19 Z"
                                            fill="currentColor" />
                                    </g>
                                </svg>
                            </div>
                            <div class="ml-3 flex-1 md:flex md:justify-between">
                                <p class="text-xs text-gray-500 font-medium">Modify allocated template group list by
                                    adding more or removing from the list. Please note that the modification will not
                                    affect any previously configured or ongoing campaigns</p>
                            </div>
                        </div>
                    </div>

                    <!-- selected groups -->
                    <div *ngIf="selectedAcctType != '2'">
                        <div class="flex mt-6 justify-end space-x-4">
                            <button type="button" (click)="onClickRemoveAll()"
                                class="inline-flex items-center px-1 py-1.5 text-sm leading-4 font-medium tracking-wide rounded-md text-red-400 hover:underline focus:outline-none"
                                *ngIf="this.allocatedGroups!= null &&
                        this.allocatedGroups.length >0">
                                <svg class="h-3 w-3 mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                    fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                        clip-rule="evenodd" />
                                </svg>
                                Remove All
                            </button>
                            <button type="button" (click)="onClickAllocate()"
                                class="inline-flex items-center px-1 py-1.5 text-sm leading-4 font-medium tracking-wide rounded-md text-blue-500 bg-white hover:underline focus:outline-none">
                                <!-- Heroicon name: solid/mail -->
                                <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"
                                    fill="currentColor" stroke="none">
                                    <path fill-rule="evenodd"
                                        d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"
                                        clip-rule="evenodd" />
                                </svg>
                                Add
                            </button>
                        </div>
                        <div [ngClass]="allocatedCtrl.touched && allocatedCtrl.errors?.required ? 'border-red-300' : 'border-gray-300' "
                            class="flex flex-wrap pl-3 pt-2 pb-2 border-2 border-gray-300 border-dashed rounded-md ">
                            <div class="space-y-2 overflow-auto" *ngFor="let group of allocatedGroups; index as i">
                                <span
                                    class="inline-flex rounded-md items-center justify-center py-1 pl-2.5 pr-1 text-xs font-medium bg-indigo-100 text-indigo-700 mr-1.5">
                                    {{group.template_group_name}}
                                    <button type="button" (click)="removeGroup(i)"
                                        class="flex-shrink-0 ml-0.5 h-4 w-4 rounded-full inline-flex items-center justify-center text-indigo-400 hover:bg-indigo-200 hover:text-indigo-500 focus:outline-none focus:bg-indigo-500 focus:text-white">
                                        <span class="sr-only">Remove selected group</span>
                                        <svg class="h-2 w-2" stroke="currentColor" fill="none" viewBox="0 0 8 8">
                                            <path stroke-linecap="round" stroke-width="1.5" d="M1 1l6 6m0-6L1 7" />
                                        </svg>
                                    </button>
                                </span>
                            </div>

                        </div>
                        <p class="mt-2 text-xxs sm:text-xs text-red-600"
                            *ngIf="allocatedCtrl.touched && allocatedCtrl.errors?.required">
                            Atleast one Template Group has to be allocated
                        </p>
                    </div>


                </div>
                <app-template-group-slider *ngIf="showSlider" [groupList]="groups" (addedGroups)="addedGroups($event)"
                    (closeSlider)="closeSlider()"></app-template-group-slider>
            </div>
            <!-- Assign Template group section -->
            <div *ngIf="this.allocatedGroups!= null &&
        this.allocatedGroups.length >0">
                <div class="text-lg font-semibold text-gray-700 mt-4">Assign Template Group<span
                        class="text-red-500">*</span></div>

                <div class="mt-8 md:flex w-full items-center justify-between md:space-x-8">
                    <div [ngClass]="assignedCtrl.touched && assignedCtrl.errors?.required ? 'border-red-300' : '' "
                        class="flex flex-col md:ml-0 md:mt-0 mt-1 w-full">
                        <div class="flex space-x-2 space-y-4 md:space-y-0 justify-between">

                            <button type="button" (click)="onClickAssign()"
                                class="inline-flex md:w-20 items-center justify-center space-x-2 bg-blue-50 py-2 px-4 rounded shadow-sm text-xs uppercase font-normal border border-blue-200 text-blue-600 hover:bg-blue-600 hover:text-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                <span class="uppercase font-medium">Change</span>

                            </button>
                            <span
                                class="inline-flex rounded-md items-center justify-between py-1.5 px-4 text-xs font-medium bg-yellow-100 text-yellow-700 mr-1.5"
                                *ngFor="let group of assignedGroups; index as i">
                                {{group.template_group_name}}
                                <button type="button" (click)="onRemoveAssigned(i)"
                                    class="flex-shrink-0 ml-0.5 h-4 w-4 rounded-full inline-flex items-center justify-center text-yellow-400 hover:bg-yellow-200 hover:text-yellow-500 focus:outline-none focus:bg-yellow-500 focus:text-white">
                                    <span class="sr-only">Remove selected group</span>
                                    <svg class="h-2 w-2" stroke="currentColor" fill="none" viewBox="0 0 8 8">
                                        <path stroke-linecap="round" stroke-width="1.5" d="M1 1l6 6m0-6L1 7" />
                                    </svg>
                                </button>
                            </span>


                        </div>

                        <p class="mt-3 text-xxs sm:text-xs text-gray-400"
                            *ngIf="!(assignedCtrl.touched && assignedCtrl.errors?.required)">
                            This assigned template group will determine which DLT templates can be used by this user
                            when sending campaigns
                        </p>
                        <p class="mt-2 text-xxs sm:text-xs text-red-600"
                            *ngIf="assignedCtrl.touched && assignedCtrl.errors?.required">
                            One Template Group has to be assigned
                        </p>
                    </div>
                </div>
            </div>

            <!-- button section -->
            <div class="flex justify-end mt-10 border-t pt-6 border-gray-200">
                <div class="flex space-x-4">
                    <app-discard-button [formGroup]="DLTCardFormGroup" [title]="'DLT'" [formChanged]="formChanged"
                        (updated)="handleUpdate()"></app-discard-button>

                    <app-save-button [formGroup]="DLTCardFormGroup" [title]="'DLT'" [formChanged]="formChanged"
                        (updated)="handleUpdate()"></app-save-button>
                </div>
            </div>
        </div>
    </div>
    <app-template-group-slider *ngIf="showAssignSlider" [groupList]="allocatedGroups"
        (addedGroups)="handleAssignedGroups($event)" [singleSelect]="true" (closeSlider)="closeAssignSlider()">
    </app-template-group-slider>
    <app-clear-modal [title]="'Clear Message'"
        [confirmationMessage]="'Are you sure you want to clear out the selected Groups'" [confirmLable]="'Clear'"
        (clearModalResponse)="clearModalResponse($event)" *ngIf="openClearModal">
    </app-clear-modal>