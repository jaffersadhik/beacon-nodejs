<div class="border-b border-gray-200 pt-2 bg-white">
	<div class="flex justify-between">
		<div class="lg:flex sm:items-baseline">
			<h3
				class="text-md leading-6 font-bold text-gray-900 lg:px-4 pl-2 lg:text-lg lg:border-gray-200 lg:border-r"
			>
				Templates
			</h3>
			<div
				class="mb-2 sm:pb-1 space-x-1 ml-2 text-xxs lg:text-xs text-gray-400"
			>
				<span class="hover:text-blue-500 cursor-pointer">Template</span>
				<span class="text-xxs font-mono">/</span>
				<span class="hover:text-blue-500 cursor-pointer"
					>Template List</span
				>
			</div>
		</div>
		<div></div>
	</div>
</div>

<main class="flex-1 relative overflow-y-auto focus:outline-none" >
	<div class="py-6 relative">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8 mt-6">
			<!-- Replace with your content -->
			<div class="bg-white p-5 md:p-10 rounded">
				<div class="text-lg font-medium text-gray-800">Templates</div>
				<div class="space-y-4">
					<div
						class="flex flex-col sm:flex-row justify-between pt-6 space-y-2"
					>
						<!-- search -->
						<div class="relative sm:w-1/2">
							<input
								type="text"
								[(ngModel)]="searchText"
								(keyup)="getcount()"
								name="name"
								id="search"
								class="sm:block flex w-full text-xs py-3 pl-10 text-gray-800 placeholder-gray-300 focus:outline-none border-gray-100 bg-opacity-60 bg-gray-100 rounded"
								placeholder="Search Templates"
								value=""
								aria-invalid="true"
								aria-describedby="name-error"
							/>
							<!-- <input type="text" size="50" placeholder="Global Search " class="form-control searchbar" [formControl]="search_supply"> -->
							<div
								class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
							>
								<svg
									class="w-5 h-5 text-gray-400"
									xmlns="http://www.w3.org/2000/svg"
									xmlns:xlink="http://www.w3.org/1999/xlink"
									viewBox="0 0 24 24"
									version="1.1"
								>
									<g
										stroke="none"
										stroke-width="1"
										fill="none"
										fill-rule="evenodd"
									>
										<rect
											x="0"
											y="0"
											width="24"
											height="24"
										></rect>
										<path
											d="M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z"
											fill="currentColor"
											fill-rule="nonzero"
											opacity="0.3"
										></path>
										<path
											d="M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z"
											fill="currentColor"
											fill-rule="nonzero"
										></path>
									</g>
								</svg>
							</div>
						</div>
						<!-- icons section -->
						<div class="pt-2 sm:pt-0 w-full flex sm:justify-end">
							<div
								class="flex justify-between sm:justify-end space-x-2 text-xs w-full"
							>
								<div class="">
									<div class="flex items-center mr-2">
										<a
											(click)="onRefresh()"
											class="relative text-gray-600 mr-2 p-2 border-transparent border bg-gray-100 hover:bg-gray-200 cursor-pointer rounded focus:outline-none focus:ring-2 focus:ring-offset-2 border-indigo-50"
											href="javascript: void(0)"
											tooltip="Refresh" [options]= "myOptions"
										>
											<svg
												class="w-5 h-5"
												viewBox="0 0 24 24"
												version="1.1"
											>
												<g
													stroke="none"
													stroke-width="1"
													fill="none"
													fill-rule="evenodd"
												>
													<rect
														x="0"
														y="0"
														width="24"
														height="24"
													/>
													<path
														d="M8.43296491,7.17429118 L9.40782327,7.85689436 C9.49616631,7.91875282 9.56214077,8.00751728 9.5959027,8.10994332 C9.68235021,8.37220548 9.53982427,8.65489052 9.27756211,8.74133803 L5.89079566,9.85769242 C5.84469033,9.87288977 5.79661753,9.8812917 5.74809064,9.88263369 C5.4720538,9.8902674 5.24209339,9.67268366 5.23445968,9.39664682 L5.13610134,5.83998177 C5.13313425,5.73269078 5.16477113,5.62729274 5.22633424,5.53937151 C5.384723,5.31316892 5.69649589,5.25819495 5.92269848,5.4165837 L6.72910242,5.98123382 C8.16546398,4.72182424 10.0239806,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 C7.581722,20 4,16.418278 4,12 L6,12 C6,15.3137085 8.6862915,18 12,18 C15.3137085,18 18,15.3137085 18,12 C18,8.6862915 15.3137085,6 12,6 C10.6885336,6 9.44767246,6.42282109 8.43296491,7.17429118 Z"
														fill="currentColor"
														fill-rule="nonzero"
													/>
												</g>
											</svg>
										</a>
										<a
											*ngIf="selectAllCount > 0"
											class="relative"
										>
											<app-common-delete-button
												[deletingLoader]="deletingSpinner"
												[hideshow]="showhide"
												(showModal)="onShowResp($event)"
												[confirmationMessage]="deleteMessage"
												(deleteModalResponse)="onDeleteAllPreviewResp($event)"
											>
											</app-common-delete-button>
											<span
												*ngIf="selectAllCount > 0"
												class="absolute text-xxs -top-3 -right-0.5 bg-red-100 p-0.5 rounded-full font-thin text-red-600"
												>{{selectAllCount}}</span
											>
										</a>
										<a
											*ngIf="selectAllCount==0"
											class="relative text-red-300 p-2 border-transparent border bg-gray-100 rounded"
										>
											<svg
												class="w-4 h-4"
												xmlns="http://www.w3.org/2000/svg"
												viewBox="0 0 24 24"
												stroke-width="1.5"
												stroke="currentColor"
												fill="none"
												stroke-linecap="round"
												stroke-linejoin="round"
											>
												<path
													stroke="none"
													d="M0 0h24v24H0z"
												/>
												<line
													x1="4"
													y1="7"
													x2="20"
													y2="7"
												/>
												<line
													x1="10"
													y1="11"
													x2="10"
													y2="17"
												/>
												<line
													x1="14"
													y1="11"
													x2="14"
													y2="17"
												/>
												<path
													d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"
												/>
												<path
													d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"
												/>
											</svg>
										</a>
									</div>
								</div>
								<div class="flex">
									<button
										class="text-white md:flex md:items-center p-2 pr-2.5 border-transparent border bg-blue-600 hover:bg-blue-500 cursor-pointer rounded focus:outline-none focus:ring-2 focus:ring-offset-2 border-indigo-50"
										routerLink="/templates/new"
									>
										<svg
											class="w-4 h-4"
											xmlns="http://www.w3.org/2000/svg"
											xmlns:xlink="http://www.w3.org/1999/xlink"
											viewBox="0 0 24 24"
											version="1.1"
										>
											<rect
												fill="currentColor"
												x="4"
												y="11"
												width="16"
												height="2"
												rx="1"
											></rect>
											<rect
												fill="currentColor"
												opacity="0.5"
												transform="translate(12.000000, 12.000000) rotate(-270.000000) translate(-12.000000, -12.000000)"
												x="4"
												y="11"
												width="16"
												height="2"
												rx="1"
											></rect>
										</svg>
										<span class="ml-1.5 hidden md:flex"
											>New Template</span
										>
									</button>
								</div>
							</div>
						</div>
					</div>
					<!-- table section -->
					<div class="flex flex-col pt-1">
						<div class="overflow-x-auto">
							<div
								class="py-2 align-middle inline-block min-w-full pt-3"
							>
								<div class="">
									<table
										class="min-w-full divide-y-0 divide-gray-200"
									>
										<thead
											*ngIf="!(noRecords || recordCount || apiError )"
											class="bg-gray-50 text-xxs font-medium text-gray-400"
										>
											<tr class="">
												<th
													scope="col"
													class="px-2 py-2 flex items-center text-left uppercase tracking-wider"
												>
													<input
														id="selectall"
														[disabled]="recordCount  || apiError || loader "
														(click)="selectall($event)"
														[(ngModel)]="masterSelected"
														[checked]="masterSelected"
														name="selectall"
														type="checkbox"
														class="focus:ring-indigo-500 h-4 w-4 text-blue-600 bg-white border-gray-300 rounded focus:ring-0"
													/>
													<!-- <span
														class="px-6 whitespace-nowrap"
													>
														Template Name
													</span> -->
																									
													<app-sorter
													[defaultProperty]="defaultProp"
													[colTitle]="'Template Name'"
													[icon]="nameIcon"
													[defaultOrder]="'dce'"
														[sortingProperty]="'t_name'"
														(sortingEmitter)="sort($event)"
														(iconEmitter)="iconChange($event)"
														
													></app-sorter>
												</th>
												<th
													scope="col"
													class="px-6 py-2 text-left uppercase tracking-wider whitespace-nowrap"
												>
													
													<div class="flex flex-row cursor-pointer">
														<app-sorter
														[colTitle]="'Template Message'"
														[defaultProperty]="defaultProp"
														[defaultOrder]="'dce'"
															[icon]="msgIcon"
															[sortingProperty]="'t_content'"
															(sortingEmitter)="sort($event)"
															(iconEmitter)="iconChange($event)"
														></app-sorter>
													</div>
												</th>
												<th
													scope="col"
													class="px-6 py-2 text-left uppercase tracking-wider whitespace-nowrap"
												>
												
											
												<!-- <th scope="col"
                                                    class="px-6 py-2 text-left uppercase tracking-wider whitespace-nowrap">
                                                    Language</th> -->
																										<app-sorter
																										[colTitle]="'TEMPLATE TYPE'"
																										[defaultProperty]="defaultProp"
																										[defaultOrder]="'dce'"
																											[icon]="typeIcon"
																											[sortingProperty]="'t_type'"
																											(sortingEmitter)="sort($event)"
																											(iconEmitter)="iconChange($event)"
																										></app-sorter>
																									</th>
												<th
													scope="col"
													class="px-6 py-2 text-center uppercase tracking-wider whitespace-nowrap"
												>
													<!-- Created Date
													<small
														>({{userZone}})</small
													> -->
													<app-sorter
													[colTitle]="createdTs"
													[defaultProperty]="defaultProp"
													[defaultOrder]="'dce'"
														[icon]="createdTsIcon"
														[sortingProperty]="'created_ts_unix'"
														(sortingEmitter)="sort($event)"
														(iconEmitter)="iconChange($event)"
													></app-sorter>
												</th>
												<th
													scope="col"
													class="px-6 py-2 text-left uppercase tracking-wider"
												></th>
											</tr>
										</thead>
										<app-list-skeleton
											*ngIf="loader"
											[colCount]="5"
										></app-list-skeleton>

										<tbody
											*ngIf="!(noRecords || apiError || loader )"
											class="bg-white divide-y divide-gray-100"
										>
											<tr
												*ngFor="let list of collection | Filter :searchText |  sorter:order:searchprop | paginate: { itemsPerPage: itemsPerPage, currentPage: p, totalItems: total} "
											>
												<td
													class="px-2 py-2 whitespace-nowrap"
												>
													<div
														class="flex items-center"
													>
														<input
															id="g1"
															(click)="singleSelect(list,$event)"
															name="g1"
															type="checkbox"
															[checked]="list.ischecked == true"
															class="focus:ring-indigo-500 h-4 w-4 text-blue-600 bg-opacity-70 border-gray-300 rounded focus:ring-1"
														/>
														<div
															class="ml-6 space-y-0.5"
														>
															<a
																tabindex="0"
																(click)="previewTemplate(list)"
																(keydown.enter)="backEnter($event,list)"
																class="text-sm font-semibold text-gray-600 cursor-pointer rounded focus:outline-none"
															>
																{{list.t_name}}
															</a>
														</div>
													</div>
												</td>
												<td class="px-6 py-4">
													<div
														id
														class="text-xs text-gray-600 whitespace-pre-wrap ml-6"
													>
														{{list.t_content}}
													</div>
												</td>
												<td
													class="px-6 py-2 whitespace-normal"
												>
													<div
														class="text-xs font-medium tracking-wider"
													>
														<div
															class="items-center justify-center"
														>
															<span
																*ngIf="list.t_type == 'index'"
																class="inline-flex px-2 justify-center rounded text-xxs font-medium bg-blue-100 text-blue-600 ml-6"
															>
																{{list.t_type}}
															</span>
															<span
																*ngIf="list.t_type == 'column'"
																class="inline-flex px-2 justify-center rounded text-xxs font-medium bg-indigo-100 text-indigo-600 ml-6"
															>
																{{list.t_type}}</span
															>
														</div>
													</div>
												</td>
												<!-- <td class="px-6 py-2 whitespace-normal">
                                                    <div class="text-xs font-medium tracking-wider">
                                                        <div class="items-center justify-center">
                                                            <span *ngIf="list.t_lang_type == 'unicode'"
                                                                class="inline-flex px-2 justify-center rounded text-xxs bg-gray-100 text-light-blue-600">
                                                                {{list.t_lang_type}} </span>
                                                            <span *ngIf="list.t_lang_type == 'english'"
                                                                class="inline-flex px-2 justify-center rounded text-xxs bg-gray-100 text-purple-600">
                                                                {{list.t_lang_type}}</span>
                                                        </div>
                                                    </div>
                                                </td> -->
												<td
													class="px-6 py-2 text-xs text-gray-700 leading-5 tracking-wide whitespace-nowrap"
												>
													<div
														class="flex flex-col justify-center items-center"
													>
														<span
															class="px-2 rounded-full"
														>
															{{list.created_ts |
															slice : 0 :10}}
														</span>
														<span
															>{{list.created_ts |
															slice : 11 :
															25}}</span
														>
													</div>
												</td>
												<td
													class="px-6 py-2 whitespace-nowrap text-right text-sm font-medium"
												>
													<div
														class="flex items-center"
													>
														<a
															(click)="editTemplate(list)"
															class="text-gray-600 mr-2 p-2 border-transparent border bg-gray-100 hover:bg-gray-200 cursor-pointer rounded focus:outline-none focus:ring-2 focus:ring-offset-2 border-indigo-50"
															href="javascript: void(0)"
															tooltip="Edit" [options] = "myOptions"
														>
															<svg
																xmlns="http://www.w3.org/2000/svg"
																class="w-4 h-4"
																viewBox="0 0 24 24"
																stroke-width="1.5"
																stroke="currentColor"
																fill="none"
																stroke-linecap="round"
																stroke-linejoin="round"
															>
																<path
																	stroke="none"
																	d="M0 0h24v24H0z"
																/>
																<path
																	d="M9 7 h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3"
																/>
																<path
																	d="M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3"
																/>
																<line
																	x1="16"
																	y1="5"
																	x2="19"
																	y2="8"
																/>
															</svg>
														</a>
														<a class="relative">
															<app-common-delete-button
																[deletingLoader]="deletingSpinner"
																[hideshow]="showhide"
																(showModal)="onShowResp($event)"
																[confirmationMessage]="deleteMessage"
																(deleteModalResponse)="onDeletePreviewResp($event,list)"
															>
															</app-common-delete-button>
														</a>
													</div>
												</td>
											</tr>
											<!-- More items... -->
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
					<!-- end of table section -->

					<!-- api error section -->
					<app-apierror
						*ngIf="apiError && !loader && !noRecords && !recordCount"
						(Emitter)="subscribeData()"
					>
					</app-apierror>

					<!-- nodataerror section -->
					<app-nodataerror
						*ngIf="recordCount && !(noRecords && !loader && !apiError)"
						[title]="'templates'"
					>
					</app-nodataerror>

					<!-- nodata create new section -->
					<app-nodatacreatenew
						*ngIf="noRecords"
						[title]="'templates'"
						[routePath]="'/templates/new'"
					>
					</app-nodatacreatenew>
				</div>

				<!-- page navigation section -->
				<app-file-pagination
					*ngIf="!(noRecords || recordCount || apiError )"
					[total]="total"
					[totalRecord]="totalRecord"
					[p]="p"
					[pagesize]="pagesize"
					[itemsPerPage]="itemsPerPage"
					[perpageCount]="perpageCount"
					(paginationValueEmit)="ReceivedpaginateValue($event)"
				>
				</app-file-pagination>
			</div>
			<!-- /End replace -->
		</div>
	</div>

	<app-templatedeletepopup
		*ngIf="popUp"
		[Responce]="deleteResponse"
		(closePopUp)="closeDeletePopup($event)"
		(successPopUp)="continueDeletePopup($event)"
		(tryAgainPopUp)="tryAgainOnPopup($event)"
	>
	</app-templatedeletepopup>
</main>
