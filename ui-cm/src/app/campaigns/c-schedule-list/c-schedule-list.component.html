<!-- This example requires Tailwind CSS v2.0+ -->
<app-campaign-home [title]="'Scheduled List'" [openDropDown]="openDropDown" (dropDown)="dropdownclose($event)">

</app-campaign-home>




<main (click)="toggleProfileSlider()" class="flex-1 relative overflow-y-auto focus:outline-none  mt-12 lg:mt-0"
    >
    <div class="py-6 relative">
        <!-- section to show on when there are no campaigns (globally) for this user -->
        <div class="hidden flex items-start justify-between max-w-7xl min-h-screen mx-auto px-4 sm:px-6 md:px-8 mt-6">
            <div class="w-full flex flex-col items-center justify-start bg-white">
                <div class="mt-8">
                    <p class="text-2xl text-gray-700 font-semibold">Welcome!</p>
                </div>
                <div class="mt-6 w-2/3 lg:w-2/5 text-center">
                    <p class="text-md text-gray-400 font-medium">You have not created any campaigns yet. Start your
                        campaign with New Campaign button on top</p>
                </div>
                <div class="mt-10 text-center justify-center items-center">
                    <!-- <button class="text-white md:flex md:items-center p-2 px-3.5 border-transparent border bg-blue-500 hover:bg-blue-400 cursor-pointer rounded focus:outline-none focus:border-gray-800 focus:shadow-outline-gray">
                        <span class="font-medium text-sm flex">Create Account</span>
                    </button> -->
                </div>
                <div class="mt-14 text-center justify-center items-center md:w-1/2">
                    <img src="/cm/assets/login-visual-2.svg" class="object-cover w-auto h-auto md:w-full md:h-full"
                        alt="" srcset="" />
                </div>
            </div>
        </div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8 mt-10 lg:mt-2">
            <span class="text-lg font-bold text-gray-600">Scheduled Stats</span>
        </div>
        <!-- statistics section -->
        <div *ngIf="!statsLoading" class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8 mt-2 lg:mt-2">
            <div class="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-4 gap-y-3">
                <div class="bg-white dark:bg-gray-800 rounded flex items-center justify-between px-5 relative shadow">
                    <div class="absolute w-2 h-4 bg-indigo-700 left-0"></div>
                    <h3
                        class="focus:outline-none py-6 leading-4 text-gray-800 dark:text-gray-100 font-normal text-base">
                        Today</h3>
                    <h2 class="focus:outline-none text-gray-800 dark:text-gray-100 text-2xl leading-normal font-bold">
                        {{c_Today_Stats?.today}}</h2>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded flex items-center justify-between px-5 relative shadow">
                    <div class="absolute w-2 h-4 bg-green-500 left-0"></div>
                    <h3
                        class="focus:outline-none py-6 leading-4 text-gray-800 dark:text-gray-100 font-normal text-base">
                        This Week</h3>
                    <h2 class="focus:outline-none text-gray-800 dark:text-gray-100 text-2xl leading-normal font-bold">
                        {{c_Today_Stats?.thisweek}}</h2>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded flex items-center justify-between px-5 relative shadow">
                    <div class="absolute w-2 h-4 bg-light-blue-500 left-0"></div>
                    <h3
                        class="focus:outline-none py-6 leading-4 text-gray-800 dark:text-gray-100 font-normal text-base">
                        This Month</h3>
                    <h2 class="focus:outline-none text-gray-800 dark:text-gray-100 text-2xl leading-normal font-bold">
                        {{c_Today_Stats?.thismonth}}</h2>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded flex items-center justify-between px-5 relative shadow">
                    <div class="absolute w-2 h-4 bg-red-700 left-0"></div>
                    <h3
                        class="focus:outline-none py-6 leading-4 text-gray-800 dark:text-gray-100 font-normal text-base">
                        Next Month</h3>
                    <h2 class="focus:outline-none text-gray-800 dark:text-gray-100 text-2xl leading-normal font-bold">
                        {{c_Today_Stats?.nextmonth}}</h2>
                </div>
            </div>
        </div>

        <!-- statistics section skeleton loader -->
        <div *ngIf="statsLoading" class=" max-w-7xl mx-auto px-4 sm:px-6 md:px-8 mt-10 lg:mt-2">
            <div class="grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-4 gap-y-3">
                <div
                    class="bg-white dark:bg-gray-800 rounded flex items-center justify-between px-5 relative shadow h-16">
                    <div class="bg-gray-200 h-8 w-full animate-pulse"></div>
                </div>
                <div
                    class="bg-white dark:bg-gray-800 rounded flex items-center justify-between px-5 relative shadow h-16">
                    <div class="bg-gray-200 h-8 w-full animate-pulse"></div>
                </div>
                <div
                    class="bg-white dark:bg-gray-800 rounded flex items-center justify-between px-5 relative shadow h-16">
                    <div class="bg-gray-200 h-8 w-full animate-pulse"></div>
                </div>
                <div
                    class="bg-white dark:bg-gray-800 rounded flex items-center justify-between px-5 relative shadow h-16">
                    <div class="bg-gray-200 h-8 w-full animate-pulse"></div>
                </div>
            </div>
        </div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8 mt-10 lg:mt-8">
            <!-- <div class="flex flex-col space-y-1">
                <span class="text-lg font-bold text-gray-600">Schedule List</span>
                <span class="text-xs text-gray-500">Please note that all predefined dates includes today</span>
            </div> -->
        </div>






        <div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8 mt-6">
            <!-- Replace with your content -->
            <div class="bg-white px-5 py-5 md:p-6 rounded">
                <div class="text-lg font-medium text-gray-800">Scheduled Campaigns</div>
                <div class="space-y-4">
                    <div class="flex flex-col sm:flex-row justify-between pt-6 space-y-2">
                        <!-- search -->
                        <div class="relative sm:w-1/2">
                            <input [(ngModel)]="searchText" (keyup)="getcount()" type="text" name="name" id="name"
                                class="sm:block flex w-full text-xs py-3 pl-10 text-gray-800 placeholder-gray-300 focus:outline-none border-gray-100 bg-opacity-60 bg-gray-100 rounded"
                                placeholder="Search Campaigns" value="" aria-invalid="true"
                                aria-describedby="name-error" />

                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" version="1.1">
                                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <rect x="0" y="0" width="24" height="24"></rect>
                                        <path
                                            d="M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z"
                                            fill="currentColor" fill-rule="nonzero" opacity="0.3"></path>
                                        <path
                                            d="M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z"
                                            fill="currentColor" fill-rule="nonzero"></path>
                                    </g>
                                </svg>
                            </div>
                        </div>
                        <div class="pt-2 sm:pt-0 w-full flex sm:justify-end">
                            <div class="flex justify-between sm:justify-end space-x-2 text-xs w-full">
                                <div class="">
                                    <app-schedulecalender *ngIf="!onLoading" [campaignCount]="campaignLists.length"
                                        (searchClean)="searchClean($event)" (onLoad)="subscribe($event)"
                                        (filterEmit)="filtervalue($event)" (countLable)="lableValue($event)"
                                        [Retry]="retry">

                                    </app-schedulecalender>
                                </div>
                                <div class="flex sm:p-0">

                                    <button [disabled]="listLoading == true" (click)="submitData()"
                                        [ngClass]="listLoading == true ? 'bg-opacity-50 cursor-not-allowed': 'hover:bg-blue-500 cursor-pointer' "
                                        class="items-center justify-center  bg-blue-600 text-white focus:outline-none focus:ring-2 focus:ring-offset-2   flex border border-indigo-50 rounded "
                                        data-menu>
                                        <span
                                            class="px-2 py-2.5 leading-3 text-xs tracking-normal font-semibold">Submit</span>
                                        <svg class="animate-spin text-white" xmlns="http://www.w3.org/2000/svg"
                                            xmlns:xlink="http://www.w3.org/1999/xlink" width="20px" height="20px"
                                            viewBox="0 0 24 24" version="1.1" *ngIf="listLoading">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <g>
                                                    <polygon points="0 0 24 0 24 24 0 24" />
                                                </g>
                                                <path class="opacity-15"
                                                    d="M12,4 L12,6 C8.6862915,6 6,8.6862915 6,12 C6,15.3137085 8.6862915,18 12,18 C15.3137085,18 18,15.3137085 18,12 C18,10.9603196 17.7360885,9.96126435 17.2402578,9.07513926 L18.9856052,8.09853149 C19.6473536,9.28117708 20,10.6161442 20,12 C20,16.418278 16.418278,20 12,20 C7.581722,20 4,16.418278 4,12 C4,7.581722 7.581722,4 12,4 Z"
                                                    fill="currentColor" fill-rule="nonzero"
                                                    transform="translate(12.000000, 12.000000) scale(-1, 1) translate(-12.000000, -12.000000) " />
                                            </g>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- table section -->

                    <div class="flex flex-col pt-1">
                        <div class="overflow-x-auto">
                            <div class="py-2 align-middle inline-block min-w-full pt-3">
                                <div class="">
                                    <div class="flex bg-white  text-xs">
                                        <span class="ml-1 text-gray-600 tracking-wider">Total <span
                                                class="font-semibold">{{campaignLists.length}}</span> campaigns for
                                            <span class="font-semibold">{{label | titlecase}}</span></span>
                                    </div>




                                    <!-- nodata create new section -->
                                    <!-- <app-nodatacreatenew *ngIf="noRecords" [title]="'template'" [routePath]="'/templates/new'">
</app-nodatacreatenew> -->


                                    <table class="min-w-full divide-y-0 divide-gray-200 mt-4">
                                        <thead *ngIf="!(apiError  || noData || noRecords==0)"
                                            class="bg-gray-50 text-xxs font-medium text-gray-400">
                                            <tr class="">
                                                <th scope="col"
                                                    class="pr-2 py-2 flex items-center text-left uppercase tracking-wider">
                                                    <app-sorter id="firstchild" [colTitle]="'Campaign Name'"
                                                        [defaultProperty]="defaultProp" [defaultOrder]="'asc'"
                                                        [icon]="nameIcon" [sortingProperty]="'c_name'"
                                                        (sortingEmitter)="sort($event)"
                                                        (iconEmitter)="iconChange($event)"></app-sorter>
                                                </th>
                                                <th scope="col"
                                                    class="px-6 py-2 text-left uppercase tracking-wider whitespace-nowrap">

                                                    <app-sorter [colTitle]="'Message'" [defaultProperty]="defaultProp"
                                                        [defaultOrder]="'asc'" [icon]="msgIcon"
                                                        [sortingProperty]="'msg'" (sortingEmitter)="sort($event)"
                                                        (iconEmitter)="iconChange($event)"></app-sorter>
                                                </th>
                                                <th scope="col"
                                                    class="px-6 py-2 text-left uppercase tracking-wider whitespace-nowrap">
                                                    <app-sorter [colTitle]="createdTs" [defaultProperty]="defaultProp"
                                                        [defaultOrder]="'asc'" [icon]="scheduledIcon"
                                                        [sortingProperty]="'scheduled_ts_unix'"
                                                        (sortingEmitter)="sort($event)"
                                                        (iconEmitter)="iconChange($event)"></app-sorter>
                                                </th>
                                                <th scope="col"
                                                    class="px-6 py-2 text-center uppercase tracking-wider whitespace-nowrap">

                                                    <app-sorter [colTitle]="'Total'" [defaultProperty]="defaultProp"
                                                        [defaultOrder]="'asc'" [icon]="totalIcon"
                                                        [sortingProperty]="'total'" (sortingEmitter)="sort($event)"
                                                        (iconEmitter)="iconChange($event)"></app-sorter>
                                                </th>

                                                <th scope="col" class="px-6 py-2 text-center uppercase tracking-wider">

                                                    <app-sorter [colTitle]="'Selected Date'"
                                                        [defaultProperty]="defaultProp" [defaultOrder]="'asc'"
                                                        [icon]="selectedDtIcon" [sortingProperty]="'selected_ts_unix'"
                                                        (sortingEmitter)="sort($event)"
                                                        (iconEmitter)="iconChange($event)"></app-sorter>
                                                </th>
                                                <th scope="col"
                                                    class="px-6 py-2 text-center uppercase tracking-wider whitespace-nowrap">
                                                </th>

                                            </tr>
                                        </thead>
                                        <!-- table data skeleton loader -->
                                        <app-list-skeleton *ngIf="onLoading" [colCount]=6></app-list-skeleton>

                                        <tbody *ngIf="!onLoading" class="bg-white divide-y divide-gray-100">
                                            <tr
                                                *ngFor="let list of campaignLists | campaignScheduleListFilter : newSearchText() |  sorter:order:searchprop  | paginate: { itemsPerPage: itemsPerPage, currentPage: p, totalItems: total} ">
                                                <td class="px-2 py-2 whitespace-nowrap">
                                                    <div class="flex items-center">
                                                        <div class="ml-6 space-y-0.5">
                                                            <a (click)="editSchedule(list)"
                                                                class="text-sm font-semibold text-gray-600 cursor-pointer">{{list.c_name}}</a>
                                                            <div
                                                                class="flex space-x-1 align-middle items-center text-xs">
                                                                <div class="items-center justify-center">
                                                                    <span
                                                                        class="inline-flex px-2 justify-center rounded-sm text-xxs font-medium bg-gray-100 text-green-500">
                                                                        {{list.c_type | uppercase}} </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </td>
                                                <td class="px-6 py-4 whitespace-pre-wrap">
                                                    <div id="newLine" class="text-xs text-gray-600 w-60 ml-6">
                                                        {{list.msg}}</div>
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap">
                                                    <div class="text-xs px-2 font-medium tracking-wider">
                                                        <div class="items-center justify-center">
                                                            <span
                                                                class="inline-flex justify-center rounded text-xxs text-gray-600 ml-4">
                                                                {{list.scheduled_ts}}</span>
                                                        </div>
                                                    </div>
                                                </td>

                                                <td class="px-6 py-2 whitespace-normal">
                                                    <div class="text-xs font-medium tracking-wider">
                                                        <div class="items-center justify-center">
                                                            <span
                                                                class="inline-flex px-2 justify-left rounded text-xxs font-medium text-gray-700 ml-4">
                                                                {{list.total_human}} </span>
                                                        </div>
                                                    </div>
                                                </td>

                                                <td class="px-2 py-2 whitespace-nowrap">
                                                    <div class="flex items-center">
                                                        <div class=" space-y-0.5">
                                                            <span
                                                                class="inline-flex justify-center rounded text-xs text-gray-600 ml-6">
                                                                {{list.selected_dt}}</span>
                                                            <div
                                                                class="flex space-x-1 align-middle items-center text-xs">
                                                                <div class="items-center justify-center">
                                                                    <span
                                                                        class="inline-flex  justify-left rounded text-xxs bg-gray-100 text-purple-600 ml-6">
                                                                        {{list.selected_zone}}</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="px-6 py-2 whitespace-nowrap text-right text-sm font-medium">
                                                    <div class="flex items-center">
                                                        <button [disabled]="list.disablebt == true"
                                                            (click)="editSchedule(list)"
                                                            [ngClass]="list.disablebt == true ? 'cursor-not-allowed' : 'cursor-pointer dark:hover:bg-gray-600 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 border-indigo-50'"
                                                            class="text-gray-600 mr-2 p-2 border-transparent border bg-gray-100  cursor-pointer rounded "
                                                            href="javascript: void(0)" tooltip="Edit"[options] = "myOptions">
                                                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4"
                                                                viewBox="0 0 24 24" stroke-width="1.5"
                                                                stroke="currentColor" fill="none" stroke-linecap="round"
                                                                stroke-linejoin="round">
                                                                <path stroke="none" d="M0 0h24v24H0z" />
                                                                <path
                                                                    d="M9 7 h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3" />
                                                                <path
                                                                    d="M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3" />
                                                                <line x1="16" y1="5" x2="19" y2="8" />
                                                            </svg>
                                                        </button>



                                                        <button [disabled]="list.disablebt == true"
                                                            (click)="onDelete(list)"
                                                            [ngClass]="list.disablebt == true ? 'cursor-not-allowed' : 'cursor-pointer dark:hover:bg-gray-600 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 border-indigo-50'"
                                                            class="text-red-500 p-2 border-transparent border bg-gray-100 dark:bg-gray-700  cursor-pointer rounded "
                                                            href="javascript: void(0)" tooltip="Delete" [options] = "myOptions">

                                                            <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg"
                                                                viewBox="0 0 24 24" stroke-width="1.5"
                                                                stroke="currentColor" fill="none" stroke-linecap="round"
                                                                stroke-linejoin="round">
                                                                <path stroke="none" d="M0 0h24v24H0z" />
                                                                <line x1="4" y1="7" x2="20" y2="7" />
                                                                <line x1="10" y1="11" x2="10" y2="17" />
                                                                <line x1="14" y1="11" x2="14" y2="17" />
                                                                <path
                                                                    d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
                                                                <path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
                                                            </svg>


                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>

                                            <!-- More items... -->
                                        </tbody>
                                    </table>

                                    <!-- no data for selected range -->
                                    <app-nodatafor-range *ngIf="noData" [title]="'campaign'"
                                        [headContent]="NDHeadContent" [messageContent]="NDMessageCOntent">

                                    </app-nodatafor-range>
                                    <!-- api error section -->
                                    <app-apierror *ngIf="apiError && !onLoading" (Emitter)="subscribeData()">
                                    </app-apierror>

                                    <!-- nodataerror section -->
                                    <app-nodataerror *ngIf="noRecords == 0 && !(noData)" [title]="'campaigns'">
                                    </app-nodataerror>
                                </div>
                            </div>
                        </div>


                    </div>

                    <app-file-pagination *ngIf="!(apiError || onLoading  || noData || noRecords == 0)" [total]="total"
                        [totalRecord]="totalRecord" [p]="p" [pagesize]="pagesize" [itemsPerPage]="itemsPerPage"
                        [perpageCount]="perpageCount" (paginationValueEmit)="ReceivedpaginateValue($event)">
                    </app-file-pagination>
                </div>
                <!-- page navigation section -->



            </div>

            <!-- /End replace -->
        </div>
    </div>

    <app-commondeleteerrorpopup *ngIf="popUp" [Responce]="deleteResponse" (closePopUp)="closeDeletePopup($event)"
        (successPopUp)="continueDeletePopup($event)" (tryAgainPopUp)="tryAgainOnPopup($event)">
    </app-commondeleteerrorpopup>
</main>


<app-deletemodal *ngIf="showDeleteModal" [deletingLoader]="deleteLoading" [showDeleteModal]="showDeleteModal"
    [confirmationMessage]="deleteMessage" (deleteModalResponse)="onDeletePreviewResp($event)">

</app-deletemodal>